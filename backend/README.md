# A-Tech Systems Backend

This is the backend API server for A-Tech Systems, built with Express.js, TypeScript, and PostgreSQL.

## Features

- RESTful API endpoints
- JWT-based authentication
- Role-based access control
- PostgreSQL database with Prisma ORM
- Email notifications
- Input validation with Zod
- TypeScript for type safety

## Prerequisites

- Node.js (v18 or higher)
- PostgreSQL database
- npm or yarn

## Environment Setup

### Railway (Production)
1. Go to Railway dashboard
2. Click on your backend service
3. Go to "Variables" tab
4. Add these environment variables:
   ```
   DATABASE_URL = (Auto-generated by Railway PostgreSQL)
   JWT_SECRET = "your-secure-jwt-secret"
   FRONTEND_URL = "your-frontend-url"
   ```

### Local Development
1. Create a `.env` file in the backend directory
2. Add these variables:
   ```
   DATABASE_URL="your-railway-postgresql-url"
   JWT_SECRET="your-jwt-secret"
   FRONTEND_URL="http://localhost:3000"
   ```

## Initial Setup
1. Install dependencies:
   ```bash
   npm install
   ```

2. Generate Prisma client:
   ```bash
   npx prisma generate
   ```

3. Push database schema:
   ```bash
   npx prisma db push
   ```

4. Seed the database:
   ```bash
   npx prisma db seed
   ```

## Default Admin Credentials
- Email: admin@atech.com
- Password: admin123

## Available Scripts
- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm start` - Start production server
- `npm run db:push` - Push database changes
- `npm run db:seed` - Seed the database
- `npm run db:studio` - Open Prisma Studio

## Development

Start the development server:
```bash
npm run dev
```

The server will run on http://localhost:5000 by default.

## API Documentation

### Authentication
- POST `/api/auth/login` - User login

### Categories
- GET `/api/categories` - List all categories
- POST `/api/categories` - Create a category (Admin only)
- PUT `/api/categories/:id` - Update a category (Admin only)
- DELETE `/api/categories/:id` - Delete a category (Admin only)

### News
- GET `/api/news` - List all news
- POST `/api/news` - Create a news item (Admin only)
- PUT `/api/news/:id` - Update a news item (Admin only)
- DELETE `/api/news/:id` - Delete a news item (Admin only)

### Contact
- POST `/api/contact` - Submit a contact form
- GET `/api/messages` - List all messages (Admin only)
- PUT `/api/messages/:id/read` - Mark message as read (Admin only)
- DELETE `/api/messages/:id` - Delete a message (Admin only)

## Production

Build the application:
```bash
npm run build
```

Start the production server:
```bash
npm start
``` 